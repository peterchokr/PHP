# 7장: 파일 업로드 & 에러 처리

---

## 학습목표

**학습목표**: 파일 업로드 기능을 구현하고, 안전하게 파일을 처리하며, 발생하는 에러를 적절히 처리할 수 있음

이 장을 학습하고 나면 다음을 할 수 있습니다:

✅ 파일 업로드 HTML 폼을 작성할 수 있습니다.
✅ $_FILES 배열의 구조를 이해하고 사용할 수 있습니다.
✅ 파일의 확장자와 크기를 검증할 수 있습니다.
✅ 업로드된 파일을 서버에 저장할 수 있습니다.
✅ 발생하는 에러를 처리하고 적절한 메시지를 표시할 수 있습니다.

---

## 1️⃣ 파일 업로드의 기초

### 1-1 파일 업로드란?

**파일 업로드?** 사용자가 자신의 컴퓨터에 있는 파일을 서버로 전송하는 기능입니다.

```
파일 업로드 과정:
1. 사용자가 HTML 폼에서 파일 선택
2. 폼을 제출하면 파일이 서버로 전송
3. 서버의 PHP가 $_FILES 배열에서 파일 정보 수신
4. 파일을 검증 (확장자, 크기, 악성코드 등)
5. 검증 완료하면 서버에 저장
6. 데이터베이스에 파일 경로 기록 (옵션)

특징:
- 이미지, 문서, 영상 등 다양한 파일 업로드 가능
- 보안이 매우 중요함 (악성 파일 방지)
- 파일 크기 제한 필요 (서버 용량 관리)
```

### 1-2 파일 업로드 HTML 폼

**파일 업로드 폼 작성:**

HTML 폼에서 파일을 업로드하려면 다음 3가지가 필수입니다:

```html
<!-- 1. enctype="multipart/form-data" 필수! -->
<!-- 2. method="POST" 필수! -->
<!-- 3. <input type="file"> 필수! -->

<form method="POST" enctype="multipart/form-data">
    <input type="file" name="upload_file" required>
    <button type="submit">업로드</button>
</form>
```

**각 항목의 의미:**

```
enctype="multipart/form-data"
- "multipart" = 여러 종류의 데이터 전송 가능
- 파일을 전송할 때는 반드시 이 속성 필요
- 없으면 파일이 제대로 전송되지 않음

method="POST"
- GET은 URL에 데이터를 붙여서 전송 (파일 불가)
- POST는 요청 본문에 데이터를 포함해서 전송 (파일 가능)
- 파일 업로드 시 반드시 POST 사용

<input type="file">
- type="file"로 설정해야 파일 선택 대화상자 표시
- name 속성으로 파일을 구분 ($_FILES['upload_file'])
```

### 1-3 $_FILES 배열의 구조

**파일 정보는 $_FILES 배열에 저장됩니다:**

```
사용자가 name="upload_file"로 파일을 업로드하면,
PHP가 자동으로 $_FILES['upload_file'] 배열을 생성합니다.

구조:
$_FILES['upload_file']['name']     // 원본 파일명 (user_image.jpg)
$_FILES['upload_file']['type']     // MIME 타입 (image/jpeg)
$_FILES['upload_file']['size']     // 파일 크기 (바이트 단위)
$_FILES['upload_file']['tmp_name'] // 임시 저장 경로 (/tmp/php123...)
$_FILES['upload_file']['error']    // 에러 코드 (0 = 성공)

예시:
Array
(
    [upload_file] => Array
    (
        [name]     => 'photo.jpg'
        [type]     => 'image/jpeg'
        [size]     => 1024000
        [tmp_name] => '/tmp/php123abc'
        [error]    => 0
    )
)
```

---

## 2️⃣ 파일 검증

### 2-1 왜 파일 검증이 필요한가?

**파일 업로드의 위험성:**

```
❌ 위험한 상황들:
- 악성 PHP 파일을 업로드하면 서버를 해킹할 수 있음
- 용량이 너무 큰 파일을 업로드하면 서버 용량 초과
- 예상과 다른 파일 형식 업로드 (mp4를 jpg라고 위장)
- 파일명에 특수문자가 있으면 저장 시 문제 발생

✅ 해결 방법:
- 파일 확장자 검증 (화이트리스트 사용)
- 파일 크기 검증
- MIME 타입 검증
- 파일명 정제
```

### 2-2 파일 확장자 검증

**파일 확장자 확인하기:**

```php
<?php

// 업로드된 파일명 가져오기
$filename = $_FILES['upload_file']['name'];

// 파일 확장자 추출
// pathinfo($path, PATHINFO_EXTENSION)
// = 파일 경로에서 확장자 부분만 추출
// 예: "photo.jpg" → "jpg"
// strtolower() = 문자를 소문자로 변환
// 예: "JPG" → "jpg" (대소문자 통일)
$ext = strtolower(pathinfo($filename, PATHINFO_EXTENSION));

// 허용하는 확장자 목록 (화이트리스트)
$allowed = ['jpg', 'jpeg', 'png', 'gif'];

// 확장자 검증
// in_array($needle, $haystack)
// = $needle이 $haystack 배열에 존재하는가?
// in_array('jpg', ['jpg', 'png']) → true
// in_array('exe', ['jpg', 'png']) → false
// !in_array = 존재하지 않으면 true
if (!in_array($ext, $allowed)) {
    echo "❌ jpg, png, gif 파일만 업로드 가능합니다";
    exit;
}

echo "✅ 파일 확장자가 올바릅니다";

?>
```

### 2-3 파일 크기 검증

**파일 크기 확인하기:**

```php
<?php

// 파일 크기 가져오기 (바이트 단위)
$file_size = $_FILES['upload_file']['size'];

// 최대 크기 설정 (5MB = 5 * 1024 * 1024 바이트)
$max_size = 5 * 1024 * 1024;

// 크기 검증
if ($file_size > $max_size) {
    // 파일 크기를 MB 단위로 표시
    // (1024 * 1024) = 1MB를 바이트로 환산
    $max_mb = $max_size / (1024 * 1024);
    echo "❌ 파일 크기는 {$max_mb}MB 이하여야 합니다";
    exit;
}

// 파일 크기를 MB 단위로 표시
// round($number, 소수점자릿수) = 지정된 자릿수로 반올림
// round(1024.56789, 2) → 1024.57
$file_size_mb = round($file_size / (1024 * 1024), 2);
echo "✅ 파일 크기: {$file_size_mb}MB (허용됨)";

?>
```

### 2-4 MIME 타입 검증

**파일의 실제 형식 확인하기:**

```php
<?php

// MIME 타입 가져오기
// 사용자가 업로드할 때 브라우저가 자동으로 설정
$mime_type = $_FILES['upload_file']['type'];

// 허용하는 MIME 타입 (더 안전함)
$allowed_mime = [
    'image/jpeg',
    'image/png',
    'image/gif'
];

// MIME 타입 검증
if (!in_array($mime_type, $allowed_mime)) {
    echo "❌ 이미지 파일만 업로드 가능합니다";
    echo "받은 타입: {$mime_type}";
    exit;
}

echo "✅ MIME 타입이 올바릅니다";

?>
```

### 2-5 업로드 에러 코드 확인

**파일 업로드 중 발생한 에러 확인:**

```php
<?php

// $_FILES['upload_file']['error'] = 에러 코드
// 0 = 성공, 그 외 = 에러 발생

$error_code = $_FILES['upload_file']['error'];

// 에러 코드별 메시지
$error_messages = [
    0 => '파일 업로드 성공',
    1 => '파일 크기가 너무 큽니다 (php.ini 제한)',
    2 => '파일 크기가 HTML 폼에서 설정한 제한을 초과',
    3 => '파일이 부분적으로만 업로드됨',
    4 => '파일이 선택되지 않음',
    6 => '임시 디렉토리를 찾을 수 없음',
    7 => '파일을 서버에 저장할 수 없음'
];

// 에러 확인
if ($error_code !== 0) {
    echo "❌ " . $error_messages[$error_code];
    exit;
}

echo "✅ 파일 업로드 성공";

?>
```

---

## 3️⃣ 파일 저장 및 이동

### 3-1 move_uploaded_file() 함수

**업로드된 파일을 서버에 저장하기:**

```php
<?php

// 임시 경로와 저장할 경로 설정
$tmp_path = $_FILES['upload_file']['tmp_name'];  // 임시 경로
$upload_dir = 'uploads/';                         // 저장할 디렉토리
$filename = $_FILES['upload_file']['name'];      // 원본 파일명
$destination = $upload_dir . $filename;          // 최종 경로

// move_uploaded_file() = 임시 파일을 실제 경로로 이동
// 첫 번째 인자: 임시 경로
// 두 번째 인자: 저장할 최종 경로
if (move_uploaded_file($tmp_path, $destination)) {
    // 파일 이동 성공
    echo "✅ 파일이 {$destination}에 저장되었습니다";
} else {
    // 파일 이동 실패
    echo "❌ 파일 저장에 실패했습니다";
}

?>
```

### 3-2 파일명 정제 및 중복 방지

**안전한 파일명으로 저장하기:**

```php
<?php

// 1단계: 원본 파일명에서 확장자 분리
$original_name = $_FILES['upload_file']['name'];
// pathinfo() = 파일 경로에서 정보 추출
// PATHINFO_EXTENSION = 확장자만 추출
// 예: "photo.jpg" → "jpg"
$ext = strtolower(pathinfo($original_name, PATHINFO_EXTENSION));

// 2단계: 새로운 파일명 생성 (타임스탬프 + 난수)
// 목적: 중복 방지 + 특수문자 제거
// time() = 현재 시간을 유닉스 타임스탐프로 반환
// 예: 1673456789 (1970년 1월 1일부터의 초 단위)
// rand(1000, 9999) = 1000~9999 사이의 난수 생성
// 예: 5432
// 결과: "1673456789_5432.jpg"
$new_filename = time() . '_' . rand(1000, 9999) . '.' . $ext;

// 3단계: 저장 경로 설정
$upload_dir = 'uploads/';
$destination = $upload_dir . $new_filename;

// 4단계: 파일 이동
// move_uploaded_file($from, $to)
// = 임시 경로의 파일을 실제 경로로 이동
// 반환값: 성공하면 true, 실패하면 false
if (move_uploaded_file($_FILES['upload_file']['tmp_name'], $destination)) {
    echo "✅ 파일이 저장되었습니다: {$new_filename}";
} else {
    echo "❌ 파일 저장 실패";
}

?>
```

---

## 4️⃣ 에러 처리

### 4-1 try-catch 블록이란?

**에러가 발생해도 프로그램을 중단시키지 않기:**

```
try-catch 문법:
try {
    // 이 영역에서 에러 발생 가능한 코드 작성
    // 예: 파일 접근, 데이터베이스 조회, 파일 업로드
} catch (Exception $e) {
    // 에러가 발생하면 이 블록 실행
    // $e = 에러 정보 객체
    // 에러 메시지 표시, 로그 저장 등
}

특징:
- try 블록의 코드 실행 중 에러 발생
- catch 블록으로 이동하여 에러 처리
- 프로그램은 계속 실행됨 (중단 안 함)
```

### 4-2 파일 업로드 에러 처리

**파일 업로드 전체 과정 (에러 처리 포함):**

```php
<?php

$upload_message = '';

// 파일이 업로드되었는가?
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  
    try {
        // 1단계: 파일이 선택되었는지 확인
        if ($_FILES['upload_file']['error'] === 4) {
            throw new Exception("파일을 선택하세요");
        }
  
        // 2단계: 업로드 에러 확인
        if ($_FILES['upload_file']['error'] !== 0) {
            throw new Exception("파일 업로드 중 에러 발생");
        }
  
        // 3단계: 파일 크기 확인
        $max_size = 5 * 1024 * 1024;  // 5MB
        if ($_FILES['upload_file']['size'] > $max_size) {
            throw new Exception("파일 크기가 5MB를 초과합니다");
        }
  
        // 4단계: 파일 확장자 확인
        $ext = strtolower(pathinfo($_FILES['upload_file']['name'], PATHINFO_EXTENSION));
        $allowed = ['jpg', 'jpeg', 'png', 'gif'];
        if (!in_array($ext, $allowed)) {
            throw new Exception("이미지 파일만 업로드 가능합니다");
        }
  
        // 5단계: 파일 이동
        $new_filename = time() . '_' . rand(1000, 9999) . '.' . $ext;
        $destination = 'uploads/' . $new_filename;
  
        if (!move_uploaded_file($_FILES['upload_file']['tmp_name'], $destination)) {
            throw new Exception("파일 저장에 실패했습니다");
        }
  
        // 성공 메시지
        $upload_message = "✅ 파일 '{$new_filename}'이 업로드되었습니다";
  
    } catch (Exception $e) {
        // 에러 발생 시 메시지 표시
        $upload_message = "❌ " . $e->getMessage();
    }
}

?>
```

### 4-3 데이터베이스 에러 처리

**데이터베이스 작업 시 에러 처리:**

```php
<?php

try {
    // 데이터베이스 연결
    $pdo = new PDO(
        "mysql:host=localhost;dbname=test_db",
        "root",
        ""
    );
} catch (PDOException $e) {
    // 연결 실패
    die("❌ 데이터베이스 연결 실패: " . $e->getMessage());
}

try {
    // 데이터베이스에 파일 정보 저장
    $sql = "INSERT INTO uploads (filename, original_name, size) VALUES (?, ?, ?)";
    $stmt = $pdo->prepare($sql);
  
    $stmt->execute([
        $new_filename,
        $_FILES['upload_file']['name'],
        $_FILES['upload_file']['size']
    ]);
  
    echo "✅ 파일 정보가 저장되었습니다";
  
} catch (PDOException $e) {
    // 저장 실패
    echo "❌ 데이터베이스 저장 실패: " . $e->getMessage();
}

?>
```

---

## 5️⃣ 실습 예제

### 5-1 실습 예제: 이미지 업로드 시스템

#### 파일 1: upload.php (파일 업로드)

```php
<?php

$upload_message = '';
$uploaded_file = '';

// 1단계: 디렉토리 존재 확인
// is_dir($path) = 지정된 경로가 디렉토리인가?
// is_dir('uploads') → true(존재) 또는 false(없음)
// !is_dir = 디렉토리가 없으면 true
if (!is_dir('uploads')) {
    // mkdir($path, $permissions)
    // = 새로운 디렉토리 생성
    // 0755 = 소유자는 읽기/쓰기/실행, 다른 사용자는 읽기/실행
    mkdir('uploads', 0755);
}

// 2단계: 파일 업로드 처리
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  
    try {
        // 파일이 선택되었는가?
        if (empty($_FILES) || $_FILES['upload_file']['error'] === 4) {
            throw new Exception("파일을 선택하세요");
        }
  
        // 업로드 에러 확인
        if ($_FILES['upload_file']['error'] !== 0) {
            throw new Exception("파일 업로드 중 에러가 발생했습니다");
        }
  
        // 파일 크기 확인 (5MB)
        if ($_FILES['upload_file']['size'] > 5 * 1024 * 1024) {
            throw new Exception("파일 크기는 5MB 이하여야 합니다");
        }
  
        // 파일 확장자 확인
        $ext = strtolower(pathinfo($_FILES['upload_file']['name'], PATHINFO_EXTENSION));
        $allowed = ['jpg', 'jpeg', 'png', 'gif'];
        if (!in_array($ext, $allowed)) {
            throw new Exception("jpg, png, gif 파일만 업로드 가능합니다");
        }
  
        // 새 파일명 생성
        $new_filename = time() . '_' . rand(1000, 9999) . '.' . $ext;
        $destination = 'uploads/' . $new_filename;
  
        // 파일 이동
        if (!move_uploaded_file($_FILES['upload_file']['tmp_name'], $destination)) {
            throw new Exception("파일 저장에 실패했습니다");
        }
  
        $upload_message = "✅ '{$new_filename}'이 업로드되었습니다";
        $uploaded_file = $new_filename;
  
    } catch (Exception $e) {
        $upload_message = "❌ " . $e->getMessage();
    }
}

?>

<!DOCTYPE html>
<html>
<head>
    <title>파일 업로드</title>
    <style>
        body {
            font-family: '맑은 고딕', sans-serif;
            max-width: 500px;
            margin: 50px auto;
            padding: 20px;
        }
  
        .container {
            background: white;
            padding: 30px;
            border: 1px solid #ddd;
        }
  
        h1 {
            color: navy;
            text-align: center;
        }
  
        .form-group {
            margin: 20px 0;
        }
  
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
  
        input[type="file"] {
            padding: 10px;
            border: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
        }
  
        button {
            width: 100%;
            padding: 10px;
            background-color: navy;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
  
        .message {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
  
        .success {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
  
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
  
        .preview {
            margin-top: 20px;
            text-align: center;
        }
  
        .preview img {
            max-width: 300px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>📸 이미지 업로드</h1>
  
    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label>파일 선택:</label>
            <input type="file" name="upload_file" accept="image/*" required>
        </div>
  
        <button type="submit">업로드</button>
    </form>
  
    <?php if ($upload_message): ?>
        <div class="message <?php echo strpos($upload_message, '✅') ? 'success' : 'error'; ?>">
            <?php echo $upload_message; ?>
        </div>
    <?php endif; ?>
  
    <?php if ($uploaded_file): ?>
        <div class="preview">
            <h3>업로드된 이미지:</h3>
            <img src="uploads/<?php echo htmlspecialchars($uploaded_file); ?>" alt="업로드 이미지">
        </div>
    <?php endif; ?>
</div>

</body>
</html>
```

#### 파일 2: list_uploads.php (업로드 목록)

```php
<?php

// 이미지 파일 확장자 목록
$image_extensions = ['jpg', 'jpeg', 'png', 'gif'];

// uploads 디렉토리의 모든 파일 가져오기
$upload_dir = 'uploads/';
$files = [];

if (is_dir($upload_dir)) {
    // scandir($path) = 디렉토리의 모든 파일과 폴더를 배열로 반환
    // 예: ['.', '..', 'file1.jpg', 'file2.jpg', ...]
    // '.' = 현재 디렉토리, '..' = 상위 디렉토리
    // array_diff($array1, $array2) = $array1에서 $array2 제거
    // 예: array_diff(['.', '..', 'photo.jpg'], ['.', '..'])
    //     결과: ['photo.jpg']
    $files = array_diff(scandir($upload_dir), ['.', '..']);
}

// 파일이 이미지인지 확인하는 함수
function isImage($filename, $allowed_ext) {
    // pathinfo() = 파일 경로에서 정보 추출
    // PATHINFO_EXTENSION = 확장자만 추출
    // strtolower() = 소문자로 변환
    $ext = strtolower(pathinfo($filename, PATHINFO_EXTENSION));
  
    // in_array($needle, $haystack)
    // = $needle이 $haystack 배열에 존재하는가?
    // in_array('jpg', ['jpg', 'png', 'gif']) → true
    // in_array('exe', ['jpg', 'png', 'gif']) → false
    return in_array($ext, $allowed_ext);
}

?>

<!DOCTYPE html>
<html>
<head>
    <title>업로드 목록</title>
    <style>
        body {
            font-family: '맑은 고딕', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
  
        h1 {
            color: navy;
        }
  
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
  
        .file-item {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: center;
            background: #f9f9f9;
        }
  
        .file-item img {
            max-width: 100%;
            max-height: 150px;
            margin-bottom: 10px;
        }
  
        .file-name {
            font-size: 12px;
            color: #666;
            word-break: break-all;
        }
  
        .file-icon {
            font-size: 48px;
            margin: 20px 0;
        }
    </style>
</head>
<body>

<h1>📁 업로드된 파일 목록</h1>

<div class="file-grid">
    <?php foreach ($files as $file): ?>
        <div class="file-item">
            <?php if (isImage($file, $image_extensions)): ?>
                <!-- 이미지 파일 -->
                <img src="<?php echo htmlspecialchars($upload_dir . $file); ?>" alt="<?php echo htmlspecialchars($file); ?>">
            <?php else: ?>
                <!-- 비이미지 파일: 아이콘 표시 -->
                <div class="file-icon">📄</div>
            <?php endif; ?>
            <div class="file-name"><?php echo htmlspecialchars($file); ?></div>
        </div>
    <?php endforeach; ?>
</div>

<?php if (empty($files)): ?>
    <p>업로드된 파일이 없습니다.</p>
<?php endif; ?>

<p><a href="upload.php">← 업로드로 돌아가기</a></p>

</body>
</html>
```

---

## 6️⃣ 주요 개념 정리

### 6-1 파일 업로드 체크리스트

```
파일 업로드 시 확인사항:

[ ] HTML 폼에서 enctype="multipart/form-data" 설정
[ ] HTML 폼에서 method="POST" 설정
[ ] <input type="file"> 태그 추가
[ ] $_FILES['파일명']['error'] === 0 확인
[ ] 파일 크기 검증
[ ] 파일 확장자 검증 (화이트리스트)
[ ] MIME 타입 검증 (추가 보안)
[ ] 새 파일명 생성 (중복 방지)
[ ] uploads/ 디렉토리 존재 확인
[ ] move_uploaded_file()로 파일 이동
[ ] 데이터베이스에 파일 정보 저장 (필요시)
```

### 6-2 $_FILES 배열 구조

```php
<?php

// 파일 업로드 후 $_FILES 배열 구조

$_FILES['upload_file'] = [
    // 원본 파일명
    'name' => 'photo.jpg',
  
    // MIME 타입 (브라우저가 설정)
    'type' => 'image/jpeg',
  
    // 파일 크기 (바이트)
    'size' => 102400,
  
    // 임시 저장 경로 (자동 생성)
    'tmp_name' => '/tmp/php123abc',
  
    // 에러 코드 (0 = 성공)
    'error' => 0
];

// 각 값에 접근
echo $_FILES['upload_file']['name'];      // photo.jpg
echo $_FILES['upload_file']['size'];      // 102400
echo $_FILES['upload_file']['error'];     // 0

?>
```

### 6-3 에러 처리 패턴

```php
<?php

// 패턴 1: try-catch 사용
try {
    // 위험한 작업 (파일 업로드, DB 접근 등)
    if (조건 만족 안 함) {
        // throw new Exception("메시지")
        // = 에러를 발생시키고 catch 블록으로 이동
        // Exception = 에러 정보를 담은 객체
        throw new Exception("에러 메시지");
    }
} catch (Exception $e) {
    // 에러 처리
    // $e->getMessage() = Exception 객체에 저장된 메시지 반환
    echo "❌ " . $e->getMessage();
}

// 패턴 2: if 조건 사용
if (파일이 선택 안 됨) {
    echo "❌ 파일을 선택하세요";
    // exit; = 프로그램 즉시 종료
    // exit 이후의 코드는 실행되지 않음
    exit;
}

if (파일 크기 초과) {
    echo "❌ 파일 크기 초과";
    exit;
}

// 패턴 3: 함수로 분리
function validateFile($file) {
    if ($file['error'] !== 0) {
        return "업로드 에러";
    }
    if ($file['size'] > 5 * 1024 * 1024) {
        return "크기 초과";
    }
    return true;  // 검증 성공
}

$result = validateFile($_FILES['upload_file']);
// !== = 값이 같지 않고 타입도 다른가?
// true !== "오류메시지" → true (오류 발생)
// true !== true → false (정상)
if ($result !== true) {
    echo "❌ " . $result;
}

?>
```

---

## 📚 유용한 함수들

| 함수                     | 설명                          |
| ------------------------ | ----------------------------- |
| `pathinfo()`           | 파일 경로에서 정보 추출       |
| `move_uploaded_file()` | 임시 파일을 실제 경로로 이동  |
| `is_dir()`             | 디렉토리 존재 여부 확인       |
| `mkdir()`              | 디렉토리 생성                 |
| `scandir()`            | 디렉토리의 파일 목록 가져오기 |
| `unlink()`             | 파일 삭제                     |
| `getimagesize()`       | 이미지 정보 가져오기          |

## ✅ 퀴즈/과제

#### **과제 1: 파일 업로드 시스템 구현**

다음 기능을 포함한 파일 업로드 시스템을 만드세요:

1. **단계 1: 기본 업로드**

   - HTML 폼에서 파일 선택
   - upload.php에서 파일 검증
   - uploads/ 디렉토리에 저장
2. **단계 2: 검증 추가**

   - 파일 크기: 10MB 이하
   - 파일 확장자: jpg, png, gif, pdf
   - 중복 방지: 새 파일명 생성
3. **단계 3: 피드백 추가**

   - 성공: "파일이 업로드되었습니다"
   - 실패: 구체적인 에러 메시지

#### **과제 2: 업로드 목록 페이지**

업로드된 파일을 나열하는 페이지를 만드세요:

1. uploads/ 디렉토리의 파일 목록 표시
2. 이미지는 썸네일 표시
3. PDF는 파일명 표시
4. 삭제 버튼 추가 (선택사항)

---

수고했습니다.

조정현 교수(peterchokr@gmail.com)
영남이공대학교
